# Accessing Example Datasets

## Data Overview
We provided three spatial digital gene expression (SGE) matrix datasets, published with the NovaScope protocol. Each SGE dataset could serve serves as the input data for the NovaScope-exemplary-downstream-analysis (NEDA).

Those three SGE datasets were created via [NovaScope](https://github.com/seqscope/NovaScope/tree/main) utilizing FASTQ files derived from **the same liver tissue section** of an 8-week-old C57BL/6 wild-type male mouse. For more information on the original source FASTQ files used to create these SGE datasets, consult the NovaScope tutorial available [here](https://seqscope.github.io/NovaScope/getting_started/access_data/).

### Minimal Test Run Spatial Digital Gene Expression (SGE) Dataset
The minimal test run SGE dataset was created using a subset of liver section with a relatively shallow depth in the 2nd sequencing. This dataset is intended for preliminary testing of [NEDA](https://seqscope.github.io/NovaScope-exemplary-downstream-analysis/), primarily for validating NEDA scripts' functionality. It is not designed to yield biological insights.

### Shallow Liver Section SGE Dataset
This SGE dataset was generated by a Seq-Scope dataset for a tissue section, characterized by a relatively shallow 2nd-Seq library sequencing depth (i.e., approximately 163 million paired-end reads). The SGE dataset from FASTQ files with such depth should be sufficient to investigate major cell types alongside marker genes pertaining to liver cell diversity, and perform basic pixel-level decoding of the spatial transcriptome. This dataset comes along with a set of aligned Hematoxylin and Eosin (H&E) stained histology images. 

### Deep Liver Section SGE Dataset
The initial examination of the [shallow SGE dataset](#shallow-liver-section-sge-dataset) was encouraging, prompting a more extensive sequencing of the sample tissue to fully saturate the library (i.e., approximately 2.61 billion paired-end reads). The deep SGE dataset was produced using all pairs of 2nd-seq FASTQ file. While datasets with shallower sequencing depths offer valuable insights, deep sequencing allows for a more thorough exploration of the data. This dataset also include a set of aligned H&E stained histology images. 

## Data Format

### SGE Dataset 
Each SGE dataset is composed of `features.tsv.gz`, `barcodes.tsv.gz`, and `matrix.mtx.gz`. The data format for an SGE dataset is demonstrated in NovaScope tutorial.

For each SGE dataset, We also provided two additional figures:

* `*.gene_full_mito.png`: This image displays the distribution of spatial barcodes that aligns to the reference genome.
* `*.sge_match_sbcd.png`: This file presents three images side-by-side for a comprehensive view:
    * The spatial barcode (sbcd) image, showcasing the spatial barcode distribution along with fiducial markers, as detailed in Figure 11 of the NovaScope protocol paper.
    * The smatch image, depicting the distribution of spatial barcodes that correspond to the 2nd-seq FASTQ files, referenced in Figure 12 of the NovaScope protocol paper.
    * The SGE image, specifically referred to as `*.gene_full_mito.png`, as seen in Figure 13 of the NovaScope protocol paper.

### Aligned Hematoxylin and Eosin (H&E) Stained Histology Images
Both the [shallow SGE dataset](#shallow-liver-section-sge-dataset) and the [deep SGE dataset](#deep-liver-section-sge-dataset) come alongside a set of aligned Hematoxylin and Eosin (H&E) stained histology images. The aligned H&E histology images were created by aligning the raw histology image to the spatial coordinates of the SGE matrix using the matching fiducial markers in both. 

Each set includes two aligned H&E histology images:

* `*-hne.tif`: A referenced geotiff file that allows the coordinate transformation between the SGE matrix and histology image.
* `*-hne-fit.tif`: A tiff file that has the exact same dimension as the `*.sge_match_sbcd.png` and `*.gene_full_mito.png`.

## Downloading the Datasets
Each of the three SGE datasets is available as a separate tarball file, all under a single DOI, accessible via this URL: [https://doi.org/10.5281/zenodo.10841778](https://doi.org/10.5281/zenodo.10841778)

* Minimal Test Run SGE Dataset : 

```bash
## To download the tarball from Zenodo, you can use the following command
curl -o B08Csub_20240319_SGE.tar.gz https://zenodo.org/records/10841778/files/B08Csub_20240319_SGE.tar.gz?download=1

## (Optional) Verify the integrity of the tarball file
curl -o B08Csub_20240319_SGE.tar.gz.md5 https://zenodo.org/records/10841778/files/B08Csub_20240319_SGE.tar.gz.md5?download=1
md5sum -c B08Csub_20240319_SGE.tar.gz.md5

## uncompress the tarball using the following command
tar -zxvf B08Csub_20240319_SGE.tar.gz
```

* Shallow Liver Section SGE Dataset:

```bash
## To download the tarball from Zenodo, you can use the following command
curl -o B08Cshallow_20240319_SGE_withHE.tar.gz https://zenodo.org/records/10841778/files/B08Cshallow_20240319_SGE_withHE.tar.gz?download=1

## (Optional) Verify the integrity of the tarball file
curl -o B08Cshallow_20240319_SGE_withHE.tar.gz.md5 https://zenodo.org/records/10841778/files/B08Cshallow_20240319_SGE_withHE.tar.gz.md5?download=1
md5sum -c B08Cshallow_20240319_SGE_withHE.tar.gz.md5

## uncompress the tarball using the following command
## 
tar -zxvf B08Cshallow_20240319_SGE_withHE.tar.gz
```

* Deep Liver Section SGE Dataset:

```bash
## Download the file
curl -o B08Cdeep_20240319_SGE_withHE.tar.gz https://zenodo.org/records/10841778/files/B08Cdeep_20240319_SGE_withHE.tar.gz?download=1

## (Optional) Check the integrity
curl -o B08Cdeep_20240319_SGE_withHE.tar.gz.md5 https://zenodo.org/records/10841778/files/B08Cdeep_20240319_SGE_withHE.tar.gz.md5?download=1
md5sum -c B08Cdeep_20240319_SGE_withHE.tar.gz.md5

## Extraction
tar -zxvf B08Cdeep_20240319_SGE_withHE.tar.gz
```
